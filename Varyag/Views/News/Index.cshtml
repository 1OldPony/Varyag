@model IEnumerable<Varyag.Models.NewsViewModel>
@{
    ViewData["Title"] = "Новости";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Cache"] = "no-cache";
}
<h1 style="margin-left:10px">Новости</h1>
<p style="margin-left:10px">
    <a asp-action="Create">Создать новость</a>
</p>

<div style="margin:1vw">
    @for (int i = 1; i <= ViewBag.Pages; i++)
    {
        if (i == @ViewBag.CurrentPage)
        {
            <a href="../../../news?page=@i" ><span style="color: #e81010;margin:3px;font-size:1.4rem">@i </span></a>
        }
        else
        {
            <a href="../../../news?page=@i"><span style="color: #e81010;margin:3px;font-size:1.1rem">@i </span></a>
        }
        //asp - action = "Index" asp - route - page = "@i"
    }
</div>
<div class="myBorder"></div>
<div style="display:flex;flex-direction:column;">
    @for (int i = 0; i < Model.Count(); i++)
    {
        <div style="max-width:1020px;padding:10px;border-style:groove;margin:10px;">
            <div class="newsListElement" style="border-style:solid;border-width:1px;border-color:#00000066;">
                <div>
                    <img src="@Model.ElementAt(i).ShortFotoPreview" />
                </div>
                <div class="textPartAllNews" style="display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;margin:10px 0 10px 0;justify-self:center;width:96%;">
                    <div style="font-size:1.6rem;font-weight:bold;">@Model.ElementAt(i).NewsDatePreview</div>
                    <h2 class="newsMainStory">@Model.ElementAt(i).Header</h2>
                    <div style="display: flex;align-self: flex-end;justify-content: center;font-weight: bolder;font-size: 1.4rem;">Смотреть...</div>
                </div>
            </div>
            <div style="margin:1vw">
                <input type="button" name="showHideButton" value="Развернутый вид" id="@i" />
                <div class="MyContainer" id="@i" style="display:none">
                    <div class="projectsHalf" id="newsDetailsProjectsHalf">
                        <div class="topCatalogLine" id="newsDetails">
                            <h1 class="categorysLineItemHeader">@Model.ElementAt(i).Header</h1>
                            <div class="newsDetailsStory">@Html.Raw(Model.ElementAt(i).MainStory)</div>
                            @if (Model.ElementAt(i).PathToGallery != null)
                            {
                                <div class="fotorama" style="width:99%;" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                                    @await Component.InvokeAsync("Fotorama", new { newsId = Model.ElementAt(i).NewsId })
                                </div>
                            }
                        </div>
                        @if (LittleHelper.NullCounter(Model.ElementAt(i).PathToVideo1, Model.ElementAt(i).PathToVideo2, Model.ElementAt(i).PathToVideo3) < 2)
                        {
                            <div class="newsNav">
                                @if (Model.ElementAt(i).PathToVideo1 != null)
                                {
                                    <div class="nav-element-minor" style="cursor:pointer" id="videoOne">
                                        <div class="nav-element-inside">
                                            <p>Сюжет №1</p>
                                        </div>
                                        <input type="text" value="@Model.ElementAt(i).PathToVideo1" id="firstVideoUrl" hidden />
                                    </div>
                                }
                                @if (Model.ElementAt(i).PathToVideo2 != null)
                                {
                                    <div class="nav-element-minor" style="cursor:pointer" id="videoTwo">
                                        <div class="nav-element-inside">
                                            @if (Model.ElementAt(i).PathToVideo1 == null)
                                            {
                                                <p>Сюжет №1</p>
                                            }
                                            else
                                            {
                                                <p>Сюжет №2</p>
                                            }
                                        </div>
                                        <input type="text" value="@Model.ElementAt(i).PathToVideo2" id="secondVideoUrl" hidden />
                                    </div>
                                }
                                @if (Model.ElementAt(i).PathToVideo3 != null)
                                {
                                    <div class="nav-element-minor" style="cursor:pointer" id="videoThree">
                                        <div class="nav-element-inside">
                                            @if (Model.ElementAt(i).PathToVideo1 == null && Model.ElementAt(i).PathToVideo2 == null)
                                            {
                                                <p>Сюжет №1</p>
                                            }
                                            @if (Model.ElementAt(i).PathToVideo2 == null && Model.ElementAt(i).PathToVideo1 != null)
                                            {
                                                <p>Сюжет №2</p>
                                            }
                                            @if (Model.ElementAt(i).PathToVideo2 != null && Model.ElementAt(i).PathToVideo1 != null)
                                            {
                                                <p>Сюжет №3</p>
                                            }
                                        </div>
                                        <input type="text" value="@Model.ElementAt(i).PathToVideo3" id="thirdVideoUrl" hidden />
                                    </div>
                                }
                            </div>
                        }

                        @*На случай если только 1 видео и находится оно в разных ячейках*@

                        @if (Model.ElementAt(i).PathToVideo1 != null && Model.ElementAt(i).PathToVideo2 == null && Model.ElementAt(i).PathToVideo3 == null)
                        {
                            <div class="newsVideoPlayer" id="videoPlayer">
                                <iframe src="@Model.ElementAt(i).PathToVideo1" class="iframeForVideo" frameborder="0" id="firstVideo" allowfullscreen></iframe>
                            </div>
                        }
                        @if (Model.ElementAt(i).PathToVideo1 == null && Model.ElementAt(i).PathToVideo2 != null && Model.ElementAt(i).PathToVideo3 == null)
                        {
                            <div class="newsVideoPlayer" id="videoPlayer">
                                <iframe src="@Model.ElementAt(i).PathToVideo2" class="iframeForVideo" frameborder="0" id="firstVideo" allowfullscreen></iframe>
                            </div>
                        }
                        @if (Model.ElementAt(i).PathToVideo1 == null && Model.ElementAt(i).PathToVideo2 == null && Model.ElementAt(i).PathToVideo3 != null)
                        {
                            <div class="newsVideoPlayer" id="videoPlayer">
                                <iframe src="@Model.ElementAt(i).PathToVideo3" class="iframeForVideo" frameborder="0" id="firstVideo" allowfullscreen></iframe>
                            </div>
                        }
                        @if (Model.ElementAt(i).PathToVideo1 != null && Model.ElementAt(i).PathToVideo2 != null && Model.ElementAt(i).PathToVideo3 == null)
                        {
                            <div class="newsVideoPlayer" id="videoPlayer">
                                <iframe src="@Model.ElementAt(i).PathToVideo1" class="iframeForVideo" frameborder="0" id="firstVideo" allowfullscreen></iframe>
                            </div>
                        }
                        @if (Model.ElementAt(i).PathToVideo1 != null && Model.ElementAt(i).PathToVideo2 == null && Model.ElementAt(i).PathToVideo3 != null)
                        {
                            <div class="newsVideoPlayer" id="videoPlayer">
                                <iframe src="@Model.ElementAt(i).PathToVideo1" class="iframeForVideo" frameborder="0" id="firstVideo" allowfullscreen></iframe>
                            </div>
                        }
                        @if (Model.ElementAt(i).PathToVideo1 == null && Model.ElementAt(i).PathToVideo2 != null && Model.ElementAt(i).PathToVideo3 != null)
                        {
                            <div class="newsVideoPlayer" id="videoPlayer">
                                <iframe src="@Model.ElementAt(i).PathToVideo2" class="iframeForVideo" frameborder="0" id="firstVideo" allowfullscreen></iframe>
                            </div>
                        }
                        @if (Model.ElementAt(i).PathToVideo1 != null && Model.ElementAt(i).PathToVideo2 != null && Model.ElementAt(i).PathToVideo3 != null)
                        {
                            <div class="newsVideoPlayer" id="videoPlayer">
                                <iframe src="@Model.ElementAt(i).PathToVideo1" class="iframeForVideo" frameborder="0" id="firstVideo" allowfullscreen></iframe>
                            </div>
                        }
                    </div>
                </div>
                <p>
                    <a asp-action="Edit" asp-route-id="@Model.ElementAt(i).NewsId">Редактировать новость</a> |
                    <a asp-action="Delete" asp-route-id="@Model.ElementAt(i).NewsId">Удалить новость</a>
                </p>
            </div>
        </div>
    }
</div>


<div style="margin:1vw">
    @for (int i = 1; i <= ViewBag.Pages; i++)
    {
        if (i == @ViewBag.CurrentPage)
        {
            <a href="../../../news?page=@i"><span style="color: #e81010;margin:3px;font-size:1.4rem">@i </span></a>
        }
        else
        {
            <a href="../../../news?page=@i"><span style="color: #e81010;margin:3px;font-size:1.1rem">@i </span></a>
        }
    }
</div>
