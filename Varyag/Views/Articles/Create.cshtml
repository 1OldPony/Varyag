@model Varyag.Models.Article

@{
    ViewData["Title"] = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div style="max-width:1700px;margin:auto">
    <h1>Создать статью</h1>
    <hr />

    <form asp-action="SaveTempFoto" asp-route-actionType="create" id="fotoEditorForm" enctype="multipart/form-data">
        <div style="margin:2vW;display:flex;justify-content:flex-start;">
            <div style="grid-area:loader">
                <input type="file" name="newsFoto" required /><br />
                <select name="fotoType" asp-items="@new  SelectList(Enum.GetValues(typeof(NewsFotoType)))" style="display:block" id="typeOfFoto"></select>
                <input type="button" onclick="refreshPreviewEditor()" value="Загрузить" />
            </div>
            <div style="width:380px;font-size:1.2rem;">
                Возможно придется несколько раз нажать "Загрузить", не всегда изображение на странице обновляется с 1 раза
            </div>
        </div>
    </form>
    <form asp-action="fillArticle" enctype="multipart/form-data">
        <div class="newsFotoEditor">
            <div id="previewFotos" style="display:flex;flex-direction:column;justify-content:center;font-family:'Gabriela';font-weight:bold;margin:2vw;">
                <div class="partNewsElementViewShort" id="creator" name="ViewShort">
                    <div class="annotation">
                        <div class="annotationText" id="shortFotoNewsText">
                            @ViewBag.RefreshEditor.shortStory
                        </div>
                    </div>
                </div>
                <div class="partNewsElementViewMiddle" id="creator" name="ViewMiddle" style="margin: 10px 0 10px 0;">
                    <div class="annotation">
                        <div class="annotationText" id="middleFotoNewsText">
                            @ViewBag.RefreshEditor.middleStory
                        </div>
                    </div>
                </div>
                <div class="partNewsElementViewWide" id="creator" name="ViewWide">
                    <div class="annotation">
                        <div class="annotationText" id="wideFotoNewsText">
                            @ViewBag.RefreshEditor.wideStory
                        </div>
                    </div>
                </div>
            </div>

            <div style="display:flex;flex-direction:column;justify-content:space-between;font-family:'Gabriela';font-weight:bold;margin:2vw;">
                <div id="editorShort" class="editor">
                    <div class="newsFotoEditorControls">
                        <div id="top" class="controlGroup">
                            <div class="controlGroup">
                                <div>Ось Х</div>
                                <input type="range" name="shortFotoX" id="shortFotoX" value="@ViewBag.RefreshEditor.shortFotoX" min="0" max="100" class="axisControl" oninput="FotoAttrChange('short')" />
                            </div>
                            <div class="controlGroup">
                                <div>Ось Y</div>
                                <input type="range" name="shortFotoY" id="shortFotoY" value="@ViewBag.RefreshEditor.shortFotoY" min="0" max="100" class="axisControl" oninput="FotoAttrChange('short')" />
                            </div>
                            <div class="controlGroup">
                                <div>Масштаб</div>
                                <input type="range" name="shortFotoScale" id="shortFotoScale" value="@ViewBag.RefreshEditor.shortFotoScale" min="50" max="300" class="axisControl" oninput="FotoAttrChange('short')" />
                            </div>
                        </div>
                        <textarea rows="6" cols="30" maxlength="55" name="shortStory" value="@ViewBag.RefreshEditor.shortStory" id="shortFotoText" onkeyup="FotoTextChange('short')"></textarea>
                    </div>
                </div>
                <div id="editorMiddle" class="editor">
                    <div class="newsFotoEditorControls">
                        <div id="top" class="controlGroup">
                            <div class="controlGroup">
                                <div>Ось Х</div>
                                <input type="range" name="middleFotoX" id="middleFotoX" value="@ViewBag.RefreshEditor.middleFotoX" min="0" max="100" class="axisControl" oninput="FotoAttrChange('middle')" />
                            </div>
                            <div class="controlGroup">
                                <div>Ось Y</div>
                                <input type="range" name="middleFotoY" id="middleFotoY" value="@ViewBag.RefreshEditor.middleFotoY" min="0" max="100" class="axisControl" oninput="FotoAttrChange('middle')" />
                            </div>
                            <div class="controlGroup">
                                <div>Масштаб</div>
                                <input type="range" name="middleFotoScale" id="middleFotoScale" value="@ViewBag.RefreshEditor.middleFotoScale" min="50" max="300" class="axisControl" oninput="FotoAttrChange('middle')" />
                            </div>
                        </div>
                        <textarea rows="6" cols="30" maxlength="55" name="middleStory" value="@ViewBag.RefreshEditor.middleStory" id="middleFotoText" onkeyup="FotoTextChange('middle')"></textarea>
                    </div>
                </div>
                <div id="editorWide" class="editor">
                    <div class="newsFotoEditorControls">
                        <div id="top" class="controlGroup">
                            <div class="controlGroup">
                                <div>Ось Х</div>
                                <input type="range" name="wideFotoX" id="wideFotoX" value="@ViewBag.RefreshEditor.wideFotoX" min="0" max="100" class="axisControl" oninput="FotoAttrChange('wide')" />
                            </div>
                            <div class="controlGroup">
                                <div>Ось Y</div>
                                <input type="range" name="wideFotoY" id="wideFotoY" value="@ViewBag.RefreshEditor.wideFotoY" min="0" max="100" class="axisControl" oninput="FotoAttrChange('wide')" />
                            </div>
                            <div class="controlGroup">
                                <div>Масштаб</div>
                                <input type="range" name="wideFotoScale" id="wideFotoScale" value="@ViewBag.RefreshEditor.wideFotoScale" min="50" max="300" class="axisControl" oninput="FotoAttrChange('wide')" />
                            </div>
                        </div>
                        <textarea rows="6" cols="30" maxlength="90" name="wideStory" value="@ViewBag.RefreshEditor.wideStory" id="wideFotoText" onkeyup="FotoTextChange('wide')"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <hr />

        <div style="display:flex;flex-direction:column">
            <div>Порядковый номер блока текст-галлерея</div>
            <input id="numberOfPart" name="partsCounter" value="@ViewBag.PartNumber" type="number" min="1" max="15" style="width:400px" required />
        </div>
        <div style="display:flex">
            <textarea name="currentTextPart" id="mce"></textarea>
            <div style="display:flex;flex-direction:column;margin-left:1vw">
                <div>
                    <div>Заголовок статьи</div>
                    <input type="text" name="articleName" value="@ViewBag.Name" style="width:700px" />
                </div>
                <div>
                    <div>Краткое название, замени пробелы на тире(-)</div>
                    <input type="text" name="articleRoute" value="@ViewBag.Route" />
                </div>
                <div>
                    <div>Загрузка файлов в галлерею(Кнопка "Загрузить")</div>
                    <div style="display:flex;">
                        <input name="fotos" type="file" multiple /><input type="submit" value="Загрузить" />
                    </div>
                </div>
                @*<div style="display:flex;">*@
                    @*@if (ViewBag.PathForPartGallery1 != null)
                    {
                        <img style="width:304px;margin:10px 10px 0 0;" src='@Url.Content(LittleHelper.PathAdapter(ViewBag.PathForPreview+"\\ВерфьВаряг(превью).jpg","articlePreview"))' />
                    }*@
                    <div style="display:flex;flex-direction:column;">
                        @*<div>Фото на превью(нужно нажать кнопку "Загрузить")</div>
                            <input type="file" name="preview" />*@
                        <div>Выберите тип статьи</div>
                        <select name="articleType">
                            @if (ViewBag.Type == "Заказы для кино")
                            {
                                <option value="Заказы для кино" selected>Заказы для кино</option>
                                <option value="Заказы для музеев">Заказы для музеев</option>
                            }
                            @if (ViewBag.Type == "Заказы для музеев")
                            {
                                <option value="Заказы для кино">Заказы для кино</option>
                                <option value="Заказы для музеев" selected>Заказы для музеев</option>
                            }
                            @if (ViewBag.Type == null)
                            {
                                <option value="Заказы для кино">Заказы для кино</option>
                                <option value="Заказы для музеев">Заказы для музеев</option>
                            }
                        </select>
                    </div>
                @*</div>*@
            </div>
        </div>
        <div hidden>
            <input type="text" name="PathToGallery1" value="@ViewBag.PathForPartGallery1" />
            <input type="text" name="PathToGallery2" value="@ViewBag.PathForPartGallery2" />
            <input type="text" name="PathToGallery3" value="@ViewBag.PathForPartGallery3" />
            <input type="text" name="PathToGallery4" value="@ViewBag.PathForPartGallery4" />
            <input type="text" name="PathToGallery5" value="@ViewBag.PathForPartGallery5" />
            <input type="text" name="PathToGallery6" value="@ViewBag.PathForPartGallery6" />
            <input type="text" name="PathToGallery7" value="@ViewBag.PathForPartGallery7" />
            <input type="text" name="PathToGallery8" value="@ViewBag.PathForPartGallery8" />
            <input type="text" name="PathToGallery9" value="@ViewBag.PathForPartGallery9" />
            <input type="text" name="PathToGallery10" value="@ViewBag.PathForPartGallery10" />
            <input type="text" name="PathToGallery11" value="@ViewBag.PathForPartGallery11" />
            <input type="text" name="PathToGallery12" value="@ViewBag.PathForPartGallery12" />
            <input type="text" name="PathToGallery13" value="@ViewBag.PathForPartGallery13" />
            <input type="text" name="PathToGallery14" value="@ViewBag.PathForPartGallery14" />
            <input type="text" name="PathToGallery15" value="@ViewBag.PathForPartGallery15" />
            <input type="text" name="articleFolder" value="@ViewBag.Folder" />
        </div>
    </form>
    <form asp-action="Create">
        <div hidden>
            <input type="text" asp-for="PathToGallery1" value="@ViewBag.PathForPartGallery1" />
            <input type="text" asp-for="Text1" value="@ViewBag.Text1" />
            <input type="text" asp-for="PathToGallery2" value="@ViewBag.PathForPartGallery2" />
            <input type="text" asp-for="Text2" value="@ViewBag.Text2" />
            <input type="text" asp-for="PathToGallery3" value="@ViewBag.PathForPartGallery3" />
            <input type="text" asp-for="Text3" value="@ViewBag.Text3" />
            <input type="text" asp-for="PathToGallery4" value="@ViewBag.PathForPartGallery4" />
            <input type="text" asp-for="Text4" value="@ViewBag.Text4" />
            <input type="text" asp-for="PathToGallery5" value="@ViewBag.PathForPartGallery5" />
            <input type="text" asp-for="Text5" value="@ViewBag.Text5" />
            <input type="text" asp-for="PathToGallery6" value="@ViewBag.PathForPartGallery6" />
            <input type="text" asp-for="Text6" value="@ViewBag.Text6" />
            <input type="text" asp-for="PathToGallery7" value="@ViewBag.PathForPartGallery7" />
            <input type="text" asp-for="Text7" value="@ViewBag.Text7" />
            <input type="text" asp-for="PathToGallery8" value="@ViewBag.PathForPartGallery8" />
            <input type="text" asp-for="Text8" value="@ViewBag.Text8" />
            <input type="text" asp-for="PathToGallery9" value="@ViewBag.PathForPartGallery9" />
            <input type="text" asp-for="Text9" value="@ViewBag.Text9" />
            <input type="text" asp-for="PathToGallery10" value="@ViewBag.PathForPartGallery10" />
            <input type="text" asp-for="Text10" value="@ViewBag.Text10" />
            <input type="text" asp-for="PathToGallery11" value="@ViewBag.PathForPartGallery11" />
            <input type="text" asp-for="Text11" value="@ViewBag.Text11" />
            <input type="text" asp-for="PathToGallery12" value="@ViewBag.PathForPartGallery12" />
            <input type="text" asp-for="Text12" value="@ViewBag.Text12" />
            <input type="text" asp-for="PathToGallery13" value="@ViewBag.PathForPartGallery13" />
            <input type="text" asp-for="Text13" value="@ViewBag.Text13" />
            <input type="text" asp-for="PathToGallery14" value="@ViewBag.PathForPartGallery14" />
            <input type="text" asp-for="Text14" value="@ViewBag.Text14" />
            <input type="text" asp-for="PathToGallery15" value="@ViewBag.PathForPartGallery15" />

            @*<input type="text" asp-for="ShortFotoPreview" value="@ViewBag.RefreshEditor.ShortFotoPreview" />*@
            <input type="text" asp-for="ShortImgScale" value="@ViewBag.RefreshEditor.shortFotoScale" />
            <input type="text" asp-for="ShortImgX" value="@ViewBag.RefreshEditor.shortFotoX" />
            <input type="text" asp-for="ShortImgY" value="@ViewBag.RefreshEditor.shortFotoY" />
            <input type="text" asp-for="ShortStory" value="@ViewBag.RefreshEditor.shortStory" />
            @*<input type="text" asp-for="MiddleFotoPreview" value="@ViewBag.RefreshEditor.MiddleFotoPreview" />*@
            <input type="text" asp-for="MiddleImgScale" value="@ViewBag.RefreshEditor.middleFotoScale" />
            <input type="text" asp-for="MiddleImgX" value="@ViewBag.RefreshEditor.middleFotoX" />
            <input type="text" asp-for="MiddleImgY" value="@ViewBag.RefreshEditor.middleFotoY" />
            <input type="text" asp-for="MiddleStory" value="@ViewBag.RefreshEditor.middleStory" />
            @*<input type="text" asp-for="WideFotoPreview" value="@ViewBag.RefreshEditor.WideFotoPreview" />*@
            <input type="text" asp-for="WideImgScale" value="@ViewBag.RefreshEditor.wideFotoScale" />
            <input type="text" asp-for="WideImgX" value="@ViewBag.RefreshEditor.wideFotoX" />
            <input type="text" asp-for="WideImgY" value="@ViewBag.RefreshEditor.wideFotoY" />
            <input type="text" asp-for="WideStory" value="@ViewBag.RefreshEditor.wideStory" />
            <input asp-for="ArticleName" value="@ViewBag.Name" />
            <input asp-for="ArticleRoute" value="@ViewBag.Route" />
            <input asp-for="ArticleType" value="@ViewBag.Type" />
        </div>
        <input type="submit" value="Создать" />
    </form>
    <div style="max-width:1400px;margin:auto;display:flex;flex-direction:column">
        @if (@ViewBag.Text1 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">1</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text1)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery1, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text2 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">2</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text2)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery2, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text3 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">3</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text3)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery3, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text4 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">4</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text4)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery4, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text5 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">5</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text5)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery5, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text6 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">6</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text6)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery6, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text7 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">7</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text7)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery7, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text8 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">8</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text8)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery8, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text9 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">9</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text9)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery9, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text10 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">10</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text10)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery10, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text11 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">11</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text11)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery11, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text12 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">12</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text12)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery12, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text13 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">13</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text13)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery13, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text14 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">14</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text14)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery14, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (@ViewBag.Text15 != null)
        {
            <div style="display:flex">
                <div class="articlePartsCounter">15</div>
                <div class="articlePreviewBlokCreate">
                    <div>
                        @Html.Raw(@ViewBag.Text15)
                    </div>
                    <div>
                        <div class="fotorama" data-nav="thumbs" data-width="100%" data-fit="contain" data-allowfullscreen="native">
                            @await Component.InvokeAsync("Fotorama", new { articleId = 1, galleryPath = @ViewBag.pathForPartGallery15, singleFoto = false })
                        </div>
                    </div>
                </div>
            </div>
        }
        <div>
            <a asp-action="Index">Back to List</a>
        </div>
    </div>
</div>